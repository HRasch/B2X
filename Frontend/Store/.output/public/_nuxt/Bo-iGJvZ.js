import{j,k as J,r as b,l as h,m as Q,z as X,c as n,a as e,b as w,d,w as z,p as Y,F as S,q as V,I as ee,y as q,n as se,t as i,s as p,D as te,v as g,A as N,x as ae,J as ie,G as F,K as T,o as l,_ as re}from"./C9zZ3pWr.js";const ne={class:"checkout-page"},le={class:"container"},oe={class:"page-header"},de={class:"breadcrumb"},ue={class:"progress-container"},ve={class:"progress-steps"},pe={class:"step-number"},ce={class:"step-label"},me={class:"progress-bar"},be={class:"checkout-content"},ye={class:"order-summary-sidebar"},he={class:"order-items"},ge={class:"item-summary-info"},fe={class:"item-name"},_e={class:"item-qty"},ke={class:"item-summary-price"},Ne={class:"price-summary"},Ce={class:"summary-row"},we={class:"summary-row vat"},ze={class:"summary-row shipping"},Se={class:"summary-row total"},Ve={class:"total-amount"},xe={class:"checkout-form-main"},Me={key:0,class:"checkout-step"},Be={class:"form-grid"},Pe={class:"form-group"},$e=["aria-invalid","aria-describedby"],qe={key:0,id:"firstName-error",class:"error-message"},Fe={class:"form-group"},Ae=["aria-invalid","aria-describedby"],Le={key:0,id:"lastName-error",class:"error-message"},Ke={class:"form-group full-width"},We=["aria-invalid","aria-describedby"],Ee={key:0,id:"street-error",class:"error-message"},Ie={class:"form-group"},Ue=["aria-invalid","aria-describedby"],De={key:0,id:"zipCode-error",class:"error-message"},Ze={class:"form-group"},Ge=["aria-invalid","aria-describedby"],Te={key:0,id:"city-error",class:"error-message"},He={class:"form-group"},Oe=["aria-invalid","aria-describedby"],Re={key:0,id:"country-error",class:"error-message"},je={class:"step-actions"},Je=["disabled"],Qe={key:1,class:"checkout-step"},Xe={class:"shipping-options"},Ye=["onClick","aria-checked","onKeyup"],es={class:"shipping-radio"},ss=["name","checked","aria-label"],ts={class:"shipping-info"},as={class:"shipping-name"},is={class:"shipping-description"},rs={class:"shipping-days"},ns={class:"shipping-price"},ls={key:0,class:"error-message"},os={class:"step-actions"},ds=["disabled"],us={key:2,class:"checkout-step"},vs={class:"review-section"},ps={class:"review-content"},cs={class:"review-section"},ms={class:"review-content"},bs={class:"review-section"},ys={class:"payment-options"},hs=["onClick","aria-checked","onKeyup"],gs={class:"payment-radio"},fs=["name","checked","aria-label"],_s={class:"payment-icon"},ks={class:"payment-info"},Ns={class:"payment-name"},Cs={class:"payment-description"},ws={key:0,class:"error-message"},zs={class:"terms-section"},Ss={class:"terms-checkbox"},Vs=["aria-invalid","aria-describedby"],xs={key:0,id:"terms-error",class:"error-message"},Ms={key:0,class:"error-message submit-error"},Bs={class:"step-actions"},Ps=["disabled","aria-busy"],$s=j({__name:"Checkout",setup(qs){const x=X(),f=J(),o=b("shipping"),A=["Adresse","Versand","ÃœberprÃ¼fung"],r=b({firstName:"",lastName:"",street:"",zipCode:"",city:"",country:"Germany"}),M=b([{id:"standard",name:"Standardversand",description:"Lieferung in 5-7 Werktagen",price:5.99,days:5,selected:!0},{id:"express",name:"Expressversand",description:"Lieferung in 2-3 Werktagen",price:12.99,days:2},{id:"overnight",name:"Overnight",description:"Lieferung am nÃ¤chsten Werktag",price:24.99,days:1}]),u=b(M.value[0]),L=b([{id:"card",name:"Kreditkarte",description:"Visa, Mastercard, Amex",icon:"ğŸ’³"},{id:"paypal",name:"PayPal",description:"Schnell und sicher mit PayPal",icon:"ğŸ…¿ï¸"},{id:"sepa",name:"SEPA Ãœberweisung",description:"DirektÃ¼berweisung von Ihrem Bankkonto",icon:"ğŸ¦"}]),y=b(L.value[0]),_=b(!1),k=b(!1),t=b({}),B=h(()=>f.items.reduce((v,s)=>v+s.price*s.quantity,0)),K=h(()=>Number((B.value*.19).toFixed(2))),W=h(()=>u.value.price),P=h(()=>Number((B.value+K.value+W.value).toFixed(2))),$=h(()=>{switch(o.value){case"shipping":return 0;case"shipping-method":return 1;case"review":return 2;default:return 0}}),E=h(()=>{switch(o.value){case"shipping":return r.value.firstName.trim()!==""&&r.value.lastName.trim()!==""&&r.value.street.trim()!==""&&r.value.zipCode.trim()!==""&&r.value.city.trim()!==""&&r.value.country.trim()!=="";case"shipping-method":return u.value!==null;case"review":return y.value!==null&&_.value;default:return!1}}),I=h(()=>[!!(r.value.firstName&&r.value.lastName&&r.value.street),u.value!==null,_.value&&y.value!==null]),m=v=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(v),H=()=>(t.value={},r.value.firstName.trim()||(t.value.firstName="Vorname ist erforderlich"),r.value.lastName.trim()||(t.value.lastName="Nachname ist erforderlich"),r.value.street.trim()||(t.value.street="StraÃŸe und Hausnummer sind erforderlich"),r.value.zipCode.trim()?/^\d{5}$/.test(r.value.zipCode)||(t.value.zipCode="Postleitzahl muss 5 Ziffern haben"):t.value.zipCode="Postleitzahl ist erforderlich",r.value.city.trim()||(t.value.city="Stadt ist erforderlich"),Object.keys(t.value).length===0),U=()=>{if(o.value==="shipping"){if(!H()){console.error("Form validation failed");return}o.value="shipping-method"}else if(o.value==="shipping-method"){if(!u.value){t.value.shippingMethod="Bitte wÃ¤hlen Sie eine Versandart";return}o.value="review"}t.value={}},D=()=>{o.value==="shipping-method"?o.value="shipping":o.value==="review"&&(o.value="shipping-method"),t.value={}},Z=v=>{u.value=v,M.value.forEach(s=>s.selected=s.id===v.id),t.value.shippingMethod=""},G=v=>{y.value=v},O=async()=>{if(!_.value){t.value.terms="Sie mÃ¼ssen den Bedingungen zustimmen";return}if(!y.value){t.value.payment="Bitte wÃ¤hlen Sie eine Zahlungsmethode";return}k.value=!0;try{await new Promise(v=>setTimeout(v,1500)),console.log("Order completed with data:",{items:f.items,shipping:r.value,shippingMethod:u.value,paymentMethod:y.value,total:P.value}),f.clearCart(),await x.push("/order-confirmation")}catch(v){console.error("Error completing order:",v),t.value.submit="Fehler beim AbschlieÃŸen der Bestellung. Bitte versuchen Sie es spÃ¤ter erneut."}finally{k.value=!1}},R=()=>{x.push("/cart")};return Q(()=>{f.items.length===0&&x.push("/shop")}),(v,s)=>{const C=Y("router-link");return l(),n("div",ne,[e("div",le,[e("div",oe,[s[13]||(s[13]=e("h1",null,"Bestellabschluss",-1)),e("p",de,[w(C,{to:"/shop"},{default:z(()=>[...s[9]||(s[9]=[d("Shop",-1)])]),_:1}),s[11]||(s[11]=d(" / ",-1)),w(C,{to:"/cart"},{default:z(()=>[...s[10]||(s[10]=[d("Warenkorb",-1)])]),_:1}),s[12]||(s[12]=d(" / Kasse ",-1))])]),e("div",ue,[e("div",ve,[(l(),n(S,null,V(A,(a,c)=>e("div",{key:c,class:F(["progress-step",{active:$.value===c,completed:I.value[c]}])},[e("div",pe,i(I.value[c]&&$.value>c?"âœ“":c+1),1),e("div",ce,i(a),1)],2)),64))]),e("div",me,[e("div",{class:"progress-fill",style:ee({width:`${($.value+1)/A.length*100}%`})},null,4)])]),e("div",be,[e("aside",ye,[s[18]||(s[18]=e("h3",null,"BestellÃ¼bersicht",-1)),e("div",he,[(l(!0),n(S,null,V(se(f).items,a=>(l(),n("div",{key:a.id,class:"order-item-summary"},[e("div",ge,[e("span",fe,i(a.name),1),e("span",_e,i(a.quantity)+"Ã—",1)]),e("span",ke,i(m(a.price*a.quantity)),1)]))),128))]),e("div",Ne,[e("div",Ce,[s[14]||(s[14]=e("span",null,"Netto:",-1)),e("span",null,i(m(B.value)),1)]),e("div",we,[s[15]||(s[15]=e("span",null,"MwSt (19%):",-1)),e("span",null,i(m(K.value)),1)]),e("div",ze,[s[16]||(s[16]=e("span",null,"Versand:",-1)),e("span",null,i(m(W.value)),1)]),e("div",Se,[s[17]||(s[17]=e("span",null,"Gesamt:",-1)),e("span",Ve,i(m(P.value)),1)])]),s[19]||(s[19]=q('<div class="trust-badges" data-v-80813b99><div class="badge" data-v-80813b99><span class="badge-icon" data-v-80813b99>ğŸ”’</span><span class="badge-text" data-v-80813b99>SSL verschlÃ¼sselt</span></div><div class="badge" data-v-80813b99><span class="badge-icon" data-v-80813b99>â†©ï¸</span><span class="badge-text" data-v-80813b99>30 Tage RÃ¼ckgabe</span></div><div class="badge" data-v-80813b99><span class="badge-icon" data-v-80813b99>ğŸšš</span><span class="badge-text" data-v-80813b99>Versand versichert</span></div></div>',1))]),e("main",xe,[o.value==="shipping"?(l(),n("section",Me,[s[27]||(s[27]=e("h2",null,"Lieferadresse",-1)),s[28]||(s[28]=e("p",{class:"step-description"},"Geben Sie bitte Ihre Lieferadresse ein",-1)),e("form",{onSubmit:te(U,["prevent"])},[e("div",Be,[e("div",Pe,[s[20]||(s[20]=e("label",{for:"firstName"},"Vorname *",-1)),g(e("input",{id:"firstName","onUpdate:modelValue":s[0]||(s[0]=a=>r.value.firstName=a),type:"text",placeholder:"Max",required:"","aria-invalid":!!t.value.firstName,"aria-describedby":t.value.firstName?"firstName-error":void 0},null,8,$e),[[N,r.value.firstName]]),t.value.firstName?(l(),n("p",qe,i(t.value.firstName),1)):p("",!0)]),e("div",Fe,[s[21]||(s[21]=e("label",{for:"lastName"},"Nachname *",-1)),g(e("input",{id:"lastName","onUpdate:modelValue":s[1]||(s[1]=a=>r.value.lastName=a),type:"text",placeholder:"Mustermann",required:"","aria-invalid":!!t.value.lastName,"aria-describedby":t.value.lastName?"lastName-error":void 0},null,8,Ae),[[N,r.value.lastName]]),t.value.lastName?(l(),n("p",Le,i(t.value.lastName),1)):p("",!0)]),e("div",Ke,[s[22]||(s[22]=e("label",{for:"street"},"StraÃŸe und Hausnummer *",-1)),g(e("input",{id:"street","onUpdate:modelValue":s[2]||(s[2]=a=>r.value.street=a),type:"text",placeholder:"HauptstraÃŸe 123",required:"","aria-invalid":!!t.value.street,"aria-describedby":t.value.street?"street-error":void 0},null,8,We),[[N,r.value.street]]),t.value.street?(l(),n("p",Ee,i(t.value.street),1)):p("",!0)]),e("div",Ie,[s[23]||(s[23]=e("label",{for:"zipCode"},"Postleitzahl *",-1)),g(e("input",{id:"zipCode","onUpdate:modelValue":s[3]||(s[3]=a=>r.value.zipCode=a),type:"text",placeholder:"12345",pattern:"\\d{5}",required:"","aria-invalid":!!t.value.zipCode,"aria-describedby":t.value.zipCode?"zipCode-error":void 0},null,8,Ue),[[N,r.value.zipCode]]),t.value.zipCode?(l(),n("p",De,i(t.value.zipCode),1)):p("",!0)]),e("div",Ze,[s[24]||(s[24]=e("label",{for:"city"},"Stadt *",-1)),g(e("input",{id:"city","onUpdate:modelValue":s[4]||(s[4]=a=>r.value.city=a),type:"text",placeholder:"Berlin",required:"","aria-invalid":!!t.value.city,"aria-describedby":t.value.city?"city-error":void 0},null,8,Ge),[[N,r.value.city]]),t.value.city?(l(),n("p",Te,i(t.value.city),1)):p("",!0)]),e("div",He,[s[26]||(s[26]=e("label",{for:"country"},"Land *",-1)),g(e("select",{id:"country","onUpdate:modelValue":s[5]||(s[5]=a=>r.value.country=a),required:"","aria-invalid":!!t.value.country,"aria-describedby":t.value.country?"country-error":void 0},[...s[25]||(s[25]=[q('<option value="Germany" data-v-80813b99>Deutschland</option><option value="Austria" data-v-80813b99>Ã–sterreich</option><option value="Belgium" data-v-80813b99>Belgien</option><option value="France" data-v-80813b99>Frankreich</option><option value="Netherlands" data-v-80813b99>Niederlande</option>',5)])],8,Oe),[[ae,r.value.country]]),t.value.country?(l(),n("p",Re,i(t.value.country),1)):p("",!0)])]),e("div",je,[e("button",{type:"button",class:"btn btn-secondary",onClick:R}," â† ZurÃ¼ck zum Warenkorb "),e("button",{type:"submit",class:"btn btn-primary",disabled:!E.value}," Weiter zu Versand â†’ ",8,Je)])],32)])):p("",!0),o.value==="shipping-method"?(l(),n("section",Qe,[s[29]||(s[29]=e("h2",null,"Versandart",-1)),s[30]||(s[30]=e("p",{class:"step-description"},"WÃ¤hlen Sie Ihre bevorzugte Versandart",-1)),e("div",Xe,[(l(!0),n(S,null,V(M.value,a=>(l(),n("div",{key:a.id,class:F(["shipping-option",{selected:u.value.id===a.id}]),onClick:c=>Z(a),role:"radio","aria-checked":u.value.id===a.id,tabindex:"0",onKeyup:T(c=>Z(a),["enter"])},[e("div",es,[e("input",{type:"radio",name:`shipping-${a.id}`,checked:u.value.id===a.id,"aria-label":`${a.name}: ${m(a.price)}`},null,8,ss)]),e("div",ts,[e("div",as,i(a.name),1),e("div",is,i(a.description),1),e("div",rs,"â±ï¸ Lieferzeit: ca. "+i(a.days)+" Werktag(e)",1)]),e("div",ns,i(m(a.price)),1)],42,Ye))),128))]),t.value.shippingMethod?(l(),n("p",ls,i(t.value.shippingMethod),1)):p("",!0),e("div",os,[e("button",{type:"button",class:"btn btn-secondary",onClick:D}," â† ZurÃ¼ck zur Adresse "),e("button",{type:"button",class:"btn btn-primary",onClick:U,disabled:!u.value}," Weiter zur ÃœberprÃ¼fung â†’ ",8,ds)])])):p("",!0),o.value==="review"?(l(),n("section",us,[s[44]||(s[44]=e("h2",null,"ÃœberprÃ¼fung & Zahlungsart",-1)),e("div",vs,[s[34]||(s[34]=e("h3",null,"Lieferadresse",-1)),e("div",ps,[e("p",null,[d(i(r.value.firstName)+" "+i(r.value.lastName),1),s[31]||(s[31]=e("br",null,null,-1)),d(" "+i(r.value.street),1),s[32]||(s[32]=e("br",null,null,-1)),d(" "+i(r.value.zipCode)+" "+i(r.value.city),1),s[33]||(s[33]=e("br",null,null,-1)),d(" "+i(r.value.country),1)]),e("button",{type:"button",class:"link-button",onClick:s[6]||(s[6]=a=>o.value="shipping")}," âœï¸ Bearbeiten ")])]),e("div",cs,[s[37]||(s[37]=e("h3",null,"Versandart",-1)),e("div",ms,[e("p",null,[e("strong",null,i(u.value.name),1),s[35]||(s[35]=e("br",null,null,-1)),d(" "+i(u.value.description),1),s[36]||(s[36]=e("br",null,null,-1)),d(" Kosten: "+i(m(u.value.price)),1)]),e("button",{type:"button",class:"link-button",onClick:s[7]||(s[7]=a=>o.value="shipping-method")}," âœï¸ Bearbeiten ")])]),e("div",bs,[s[38]||(s[38]=e("h3",null,"Zahlungsart",-1)),e("div",ys,[(l(!0),n(S,null,V(L.value,a=>(l(),n("div",{key:a.id,class:F(["payment-option",{selected:y.value?.id===a.id}]),onClick:c=>G(a),role:"radio","aria-checked":y.value?.id===a.id,tabindex:"0",onKeyup:T(c=>G(a),["enter"])},[e("div",gs,[e("input",{type:"radio",name:`payment-${a.id}`,checked:y.value?.id===a.id,"aria-label":a.name},null,8,fs)]),e("div",_s,i(a.icon),1),e("div",ks,[e("div",Ns,i(a.name),1),e("div",Cs,i(a.description),1)])],42,hs))),128))]),t.value.payment?(l(),n("p",ws,i(t.value.payment),1)):p("",!0)]),e("div",zs,[e("label",Ss,[g(e("input",{"onUpdate:modelValue":s[8]||(s[8]=a=>_.value=a),type:"checkbox",required:"","aria-invalid":!!t.value.terms,"aria-describedby":t.value.terms?"terms-error":void 0},null,8,Vs),[[ie,_.value]]),e("span",null,[s[41]||(s[41]=d(" Ich akzeptiere die ",-1)),w(C,{to:"/terms"},{default:z(()=>[...s[39]||(s[39]=[d("GeschÃ¤ftsbedingungen",-1)])]),_:1}),s[42]||(s[42]=d(" und die ",-1)),w(C,{to:"/privacy"},{default:z(()=>[...s[40]||(s[40]=[d("DatenschutzerklÃ¤rung",-1)])]),_:1}),s[43]||(s[43]=d(" * ",-1))])]),t.value.terms?(l(),n("p",xs,i(t.value.terms),1)):p("",!0)]),s[45]||(s[45]=q('<div class="compliance-notice" data-v-80813b99><p class="notice-icon" data-v-80813b99>âœ“</p><div class="notice-content" data-v-80813b99><p class="notice-title" data-v-80813b99>Preisangabenverordnung (PAngV)</p><p class="notice-text" data-v-80813b99> Alle angezeigten Preise sind Endpreise und enthalten bereits die gesetzliche Mehrwertsteuer (MwSt) in HÃ¶he von 19%. </p></div></div>',1)),t.value.submit?(l(),n("p",Ms,i(t.value.submit),1)):p("",!0),e("div",Bs,[e("button",{type:"button",class:"btn btn-secondary",onClick:D}," â† ZurÃ¼ck zur Versandart "),e("button",{type:"button",class:"btn btn-primary btn-submit",onClick:O,disabled:!E.value||k.value,"aria-busy":k.value},i(k.value?"Bestellung wird verarbeitet...":`Bestellung abschlieÃŸen (${m(P.value)})`),9,Ps)])])):p("",!0)])])])])}}}),As=re($s,[["__scopeId","data-v-80813b99"]]);export{As as default};
