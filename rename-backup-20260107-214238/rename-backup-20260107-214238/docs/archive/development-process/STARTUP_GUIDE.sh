#!/bin/bash
# B2X Development Startup Guide
# Choose one of three options below

set -e

echo "??????????????????????????????????????????????"
echo "?  B2X Full Stack - Development Setup  ?"
echo "??????????????????????????????????????????????"
echo ""
echo "Choose how to start your development environment:"
echo ""
echo "????????????????????????????????????????????????????????????"
echo ""
echo "?? OPTION 1: Docker Compose (Everything in Containers)"
echo "   Command: docker-compose up -d"
echo "   Starts: Infrastructure + Backend + Frontends"
echo "   Best for: Testing, CI/CD, Production-like environment"
echo ""
echo "????????????????????????????????????????????????????????????"
echo ""
echo "?? OPTION 2: Hybrid (Aspire Dashboard + Docker Frontends)"
echo "   Terminal 1: cd AppHost && dotnet run"
echo "   Terminal 2: docker-compose up frontend-store frontend-admin"
echo "   Starts: Infrastructure in Aspire + Frontends in Docker"
echo "   Best for: Backend development + Aspire Dashboard monitoring"
echo ""
echo "????????????????????????????????????????????????????????????"
echo ""
echo "????? OPTION 3: Manual (Everything Local - Max Debugging)"
echo "   Terminal 1: cd AppHost && dotnet run"
echo "   Terminal 2: cd Frontend/Store && npm install && npm run dev"
echo "   Terminal 3: cd Frontend/Admin && npm install && npm run dev"
echo "   Starts: Everything locally"
echo "   Best for: Local development with max debugging"
echo ""
echo "????????????????????????????????????????????????????????????"
echo ""
echo "?? Access Points (after startup):"
echo ""
echo "   Store Frontend ............ http://localhost:5173"
echo "   Admin Frontend ............ http://localhost:5174"
echo "   Store API Gateway ......... http://localhost:8000"
echo "   Admin API Gateway ......... http://localhost:8080"
echo ""
echo "   Backend Services:"
echo "   - Auth Service ............ http://localhost:7002"
echo "   - Tenant Service .......... http://localhost:7003"
echo "   - Localization Service .... http://localhost:7004"
echo "   - Catalog Service ......... http://localhost:7005"
echo "   - Theming Service ......... http://localhost:7008"
echo ""
echo "   Infrastructure:"
echo "   - PostgreSQL .............. localhost:5432 (postgres/postgres)"
echo "   - Redis ................... localhost:6379"
echo "   - RabbitMQ Management UI .. http://localhost:15672 (guest/guest)"
echo "   - Elasticsearch ........... http://localhost:9200 (elastic/elastic)"
echo "   - Aspire Dashboard ........ http://localhost:15500 (Option 2 only)"
echo ""
echo "????????????????????????????????????????????????????????????"
echo ""
echo "?? To stop all services:"
echo ""
echo "   Option 1 & 2: docker-compose down"
echo "   Option 3: Press Ctrl+C in each terminal"
echo ""
echo "????????????????????????????????????????????????????????????"
echo ""
echo "?? More information: docs/ASPIRE_FRONTEND_INTEGRATION.md"
echo ""
