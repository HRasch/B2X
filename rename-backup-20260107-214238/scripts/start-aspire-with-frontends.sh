#!/bin/bash
# ASPIRE FRONTENDS QUICK START
# Builds Docker images and starts AppHost with Frontends

set -e

echo "??????????????????????????????????????????????????????????????"
echo "?        B2Connect Aspire Frontend Setup                      ?"
echo "??????????????????????????????????????????????????????????????"
echo ""

# Step 1: Build Docker Images
echo "?? Step 1: Building Docker Images..."
echo "   Building: b2connect-frontend-store:latest"
docker build -t b2connect-frontend-store:latest ./Frontend/Store
echo "   ? Done"
echo ""

echo "   Building: b2connect-frontend-admin:latest"
docker build -t b2connect-frontend-admin:latest ./Frontend/Admin
echo "   ? Done"
echo ""

# Step 2: Build AppHost
echo "?? Step 2: Building AppHost..."
dotnet build AppHost -q
echo "   ? AppHost compiled successfully"
echo ""

# Step 3: Start AppHost
echo "?? Step 3: Starting AppHost with Frontends..."
echo ""
echo "   ? Waiting for services to start..."
echo "   ?? Dashboard will be available at: http://localhost:15500"
echo "   ?? Store Frontend: http://localhost:5173"
echo "   ????? Admin Frontend: http://localhost:5174"
echo ""
echo "   Press Ctrl+C to stop all services"
echo ""

cd AppHost
dotnet run

